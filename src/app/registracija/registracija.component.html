<mat-card class="container forma">
  <div class="alert alert-success text-center" *ngIf="success">
    {{ success }}
  </div>
  <div class="alert alert-danger text-center" *ngIf="error">
    {{ error }}
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="row mx-0 justify-content-around">
      <div class="form-group ml-10">
        <div class="slika-conteiner">
          <img
            [src]="imagePreview"
            class="slika"
            *ngIf="imagePreview !== '' && imagePreview"
          />
        </div>

        <div class="justify-content-center">
          <button
            class="btn btn-info"
            type="button"
            (click)="filePicker.click()"
          >
            Izaberi sliku
          </button>
          <input
            type="file"
            name="image"
            #filePicker
            (change)="onImagePicked($event)"
          />
        </div>
      </div>
      <div class="row justify-content-center mb-3 form-group">
        <mat-form-field appearance="fill" class="izbor mt-5 mr-10">
          <mat-label>Napravi nalog kao</mat-label>
          <mat-select
            formControlName="tipKorisnika"
            required
            (selectionChange)="promeni($event)"
          >
            <mat-option [value]="'klijent'">Klijent</mat-option>
            <mat-option [value]="'terapeut'">Psihoterapeut</mat-option>
          </mat-select>
          <mat-error *ngIf="form.controls.tipKorisnika.invalid"
            >Molimo Vas da izaberete jednu opciju</mat-error
          >
        </mat-form-field>
      </div>
    </div>

    <mat-form-field
      class="input-group mb-3 form-group col-md-6"
      appearance="fill"
    >
      <mat-label>Ime</mat-label>
      <input
        formControlName="firstName"
        matInput
        type="text"
        name="ime"
        required
      />
      <mat-error *ngIf="form.controls.firstName.invalid"
        >Molimo Vas da unesete Vaše ime</mat-error
      >
    </mat-form-field>
    <mat-form-field
      class="input-group mb-3 form-group col-md-6"
      appearance="fill"
    >
      <mat-label>Prezime</mat-label>
      <input
        matInput
        type="text"
        name="prezime"
        formControlName="lastName"
        required
      />
      <mat-error *ngIf="form.controls.lastName.invalid"
        >Molimo Vas da unesete Vaše prezime</mat-error
      >
    </mat-form-field>
    <mat-form-field
      class="input-group mb-3 form-group col-md-6"
      appearance="fill"
    >
      <mat-label>E-mail</mat-label>
      <input
        matInput
        type="email"
        name="email"
        formControlName="email"
        required
      />
      <mat-error *ngIf="form.controls.telefon.invalid"
        >Molimo Vas da unesete e-mail</mat-error
      >
    </mat-form-field>
    <mat-form-field
      class="input-group mb-3 form-group col-md-6"
      appearance="fill"
    >
      <mat-label>Telefon</mat-label>
      <input
        matInput
        type="string"
        name="telefon"
        formControlName="telefon"
        required
      />
      <mat-error *ngIf="form.controls.telefon.invalid"
        >Molimo Vas da unesete telefon</mat-error
      >
    </mat-form-field>

    <mat-form-field
      class="input-group mb-3 lozinka form-group col-md-6"
      appearance="fill"
    >
      <mat-label>Lozinka</mat-label>
      <input
        matInput
        name="sifra"
        formControlName="password"
        required
        [type]="hide ? 'password' : 'text'"
      />
      <button
        mat-icon-button
        matSuffix
        (click)="hide = !hide"
        [attr.aria-pressed]="hide"
        type="button"
      >
        <mat-icon>{{ hide ? "visibility_off" : "visibility" }}</mat-icon>
      </button>
    </mat-form-field>
    <mat-form-field
      class="input-group mb-3 form-group col-md-6"
      appearance="fill"
      *ngIf="tipKorisnika == 'terapeut'"
    >
      <mat-label>Specijalizacija</mat-label>
      <input
        matInput
        type="string"
        name="specijalizacija"
        formControlName="specijalizacija"
        required
      />
      <mat-error *ngIf="form.controls.specijalizacija.valid"
        >Molimo Vas da unesete specijalizaciju</mat-error
      >
    </mat-form-field>

    <mat-form-field
      class="input-group mb-1 form-group col-md-12"
      appearance="fill"
      *ngIf="tipKorisnika == 'terapeut'"
    >
      <mat-label>Opis</mat-label>
      <textarea
        matInput
        type="string"
        name="opis"
        formControlName="opis"
        cols="40"
        rows="5"
        required
      ></textarea>
      <mat-error *ngIf="form.controls.opis.valid"
        >Molimo Vas da unesete opis</mat-error
      >
    </mat-form-field>

    <div class="container">
      <div class="col-md-12 text-center">
        <button class="btn btn-info" type="submit">Registruj se</button>
      </div>
    </div>
  </form>
</mat-card>
